# 大型网站技术架构（笔记）之概述

 时间 2017-07-25 14:35:13  

原文http://www.jianshu.com/p/38027023d792



大型网站软件系统一般都具有如下的特点

* 高并发、大流量
* 高可用
* 海量数据
* 用户分布广泛、网络情况复杂
* 安全环境恶劣
* 需求快速变更，发布频繁
* 渐进式发展

为了解决上面的问题，大型互联网公司在实践中提出了许多解决方案，这些解决方案又被更多网站重复使用，从而逐渐形成了大型网站的架构模式。这些模式可以总结为如下几种：

#### 分层

分层是将系统在横向维度上切分成几个部分，每个部分负责一块相对比较单一的职责，然后通过上层对下层的依赖和调用组成一个完成的系统。一般会将软件系统分为应用层、服务层和数据层。

分层的好处就在于方便了分工开发和维护，只要调用接口不变，各层可以独立发展。同时，分层架构也有一些挑战，各层次的边界和接口需要合理划分，在开发的时候也应该严格遵循分层架构的约束，禁止跨层调用和逆向调用。

#### 分割

分割是在纵向方面对软件进行切分。简单来说，就是将不同的功能和服务分割开来，包装成高内聚低耦合的模块单元，不同模块单独开发维护和分布式部署。

#### 分布

式分布式部署就是将不同的模块部署在不同的服务器上，通过远程调用协同工作，由于使用了更多的计算机完成同样的任务，因此，其能够处理的并发访问和数据量就更大。

虽然分布式解决了网站高并发的的问题，但同时也引入了其他的问题，比如：服务之间的调用可能会带来性能问题，服务器发生宕机会导致很多应用不可访问，数据在分布式的环境中也很难保证一致性，以及错综复杂的依赖会对开发维护带来困难。

常用的分布式方案有：

1. 分布式应用和服务
1. 分布式静态资源
1. 分布式数据和存储
1. 分布式计算

#### 集群

多台服务器部署相同应用构成一个集群，通过负载均衡设备共同对外提供服务。同样的应用因为使用的机器更多了，也就具有更好的并发性，同时，当某台服务器宕机，请求会转发到集群中其他的服务器上，从而不会影响用户的使用。

#### 缓存

缓存就是将数据存放在距离计算最近的位置，以加快处理速度。使用缓存有两个前提条件，首先是数据访问热点不均衡，那些更频繁被访问的数据应该放到缓存中，其次，数据在某个时间段里有效，不会很快过期。

#### 异步

异步使得业务之间的消息传递不再是同步调用，这种典型的生产者消费者模式的应用，给网站带来的好处也是显而易见的：提高了系统的可用性，加快了网站的相应速度以及消除了并发访问高峰。

#### 冗余

这里的冗余包含了两个方面，一个是服务器的冗余，另一个是数据的冗余。服务器的冗余提高了服务的高可用性，保证了服务器宕机的情况下服务依然可用。数据的冗余也是为了提高系统的可用性，通过对数据进行备份，在一定程度上可以抵御系统风险。

#### 自动化

这里所说的自动化一般指在发布运维的时候可以减少人为干预，也就是让发布过程自动化，这其中又包含了代码管理的自动化、测试的自动化、安全监测的自动化以及部署的自动化。网站上线后，还要对线上环境进行自动化监控等。

#### 安全

在安全方面常用的模式包括：通过密码和手机校验码进行身份认证，对网络通信进行加密，对于一些网络攻击，例如XSS、SQL注入等，进行编码转换，对敏感信息进行过滤等。

除此之外，为了衡量一个软件架构设计的优劣，我们会从5个方面来考虑：性能、可用性、伸缩性、扩展性和安全。从下篇文章开始，我们会按照这五个因素分别阐述。

